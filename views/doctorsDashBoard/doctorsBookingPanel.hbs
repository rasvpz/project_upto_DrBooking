<style>
    body {
        background-image: none;
    }

    ::placeholder {
        font-size: 18px;
        color: rgb(63, 63, 63);
    }
</style>


<table width="100%">
    <tr>
        <td width="50%" valign="top">
            <div class="booth">
                <video id="video" width="100%" height="100%" autoplay></video>
            </div>
        </td>

        <td width="50%" valign="top" style="padding: 8px;">
            <h4>{{data.doctorName}} {{data.degreee}} {{data.department}}</h4>
            <hr>
            {{#each bookingData}}
            {{!-- <form id="form" method="post" action="/doctorsDashBoard/addPrescription"></form> --}}
            <a class="btn btn-secondary" href="/doctorsDashBoard/doctorsLogin/{{this.cognitoId}}/{{this.name}}/{{this.whatsapp}}/{{../data.contact}}/{{../data.password}}">            
                <span>{{this.name}}</span><br>
                <span><font size="2">Consultaion - {{this.consultingTime}}</font></span>
                <input id="cognitoId" type="text" value="{{this.cognitoId}}" hidden>
                <input id="name" type="text" value="{{this.name}}" hidden>
            </a>
            {{/each}}
        </td>
    </tr>
</table>


<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>






<script>
    var stop = function () {
        var stream = video.srcObject;
        var tracks = stream.getTracks();

        for (var i = 0; i < tracks.length; i++) {
            var track = tracks[i];
            track.stop();
        }

        video.srcObject = null;
    }

    var start = function () {
        var video = document.getElementById('video'),
            vendorUrl = window.URL || window.webkitURL;

        if (navigator.mediaDevices.getUserMedia) {
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(function (stream) {
                    video.srcObject = stream;
                }).catch(function (error) {
                    console.log("Something went wrong!");
                });
        }
    }
    $(function () {
        start();
    });


</script>

<script type="text/javascript">

    var showingSourceCode = false;
    var isInEditMode = true;

    function enableEditMode() {
        richTextField.document.designMode = 'On';
    }

    function execCmd(command) {
        richTextField.document.execCommand(command, false, null);
    }

    function execCommandWithArg(command, arg) {
        richTextField.document.execCommand(command, false, arg);
    }

    function toggleSource() {

        if (showingSourceCode) {
            richTextField.document.getElementsByTagName('body')[0].innerHTML = richTextField.document.getElementsByTagName('body')[0].textContent;
            showingSourceCode = false;
        } else {
            richTextField.document.getElementsByTagName('body')[0].textContent = richTextField.document.getElementsByTagName('body')[0].innerHTML;
            showingSourceCode = true;
        }
    }

    function toggleEdit() {
        if (isInEditMode) {
            richTextField.document.designMode = 'off'
            isInEditMode = false;
        } else {
            richTextField.document.designMode = 'on'
            isInEditMode = true;
        }
    }

</script>

<script>
    var h = 0
    var a = 0
    function myFunction() {
        var vr = prompt("Please enter your row");
        var vc = prompt("Please enter your column");

        var table = '';
        var rows = vr;
        var cols = vc;

        for (var r = 0; r < rows; r++) {
            table += '<tr>';
            for (var c = 1; c <= cols; c++) {
                table += '<td>' + '</td>';
            }
            table += '</tr>';
        }
        var s = '<table border=1 width="100%">' + table + '</table>';
        richTextField.document.getElementsByTagName('body')[0].innerHTML = richTextField.document.getElementsByTagName('body')[0].innerHTML + s;


    }

    function saveHistory() {
        showingSourceCode = true;
        var iframe = document.getElementById("richTextField");
        var iframe_contents = document.getElementById('htmlHistory').innerHTML + iframe.contentDocument.body.innerHTML + "<hr>";
        var cognitoId = document.getElementById('cognitoId').value
        var name = document.getElementById('name').value

        $.ajax({
            url: '/doctorsDashBoard/treatMentDetails',
            data: {
                iframe: iframe_contents,
                cognitoId: cognitoId,
                name: name,
                action: 'Cormodity'
            },
            method: 'post',
            success: (resp) => {
                document.getElementById('htmlHistory').innerHTML = resp
                iframe.contentDocument.body.innerHTML = ""
            }
        })
    }

    function saveCormodity() {
        showingSourceCode = true;
        var iframe = document.getElementById("richTextField");
        var iframe_contents = document.getElementById('htmlCormodity').innerHTML + iframe.contentDocument.body.innerHTML;
        var cognitoId = document.getElementById('cognitoId').value
        var name = document.getElementById('name').value
        { { !-- const d = new Date()-- } }
        { { !-- var myDate = "<p style='color:red; font-weight:bold; margin-bottom: 0px !important'>" + d.getMonth() + 1 + "-" + d.getDate() + "-" + d.getFullYear() + "</p>"  -- } }
        $.ajax({
            url: '/doctorsDashBoard/cormodityMedicine',
            data: {
                iframe: iframe_contents,
                cognitoId: cognitoId,
                name: name,
                action: 'Cormodity'
            },
            method: 'post',
            success: (resp) => {
                alert('resp')
                document.getElementById('htmlCormodity').innerHTML = resp.cormodity + " "
                iframe.contentDocument.body.innerHTML = ""
            }
        })
    }


    function myTablets() {
        var x = document.getElementById("mySelect").selectedIndex;
        document.getElementById("tablestQty").value = document.getElementById("myTabQty")[x].value;
        document.getElementById("myTabletsRate").value = document.getElementById("tabletsRate")[x].value
        a = document.getElementById("myTabletsRate").value / document.getElementById("tablestQty").value
        document.getElementById("ratePerRate").value = a
    }
    function tabletTotal() {
        var x = document.getElementById("TabletDays").value;
        const tabTotals = document.getElementById("totalRate").value * x
        document.getElementById("subTotal").value = tabTotals
    }

    function medTimes1() {
        if (document.getElementById('tabMorning').value == 0) {
            document.getElementById('tabMorning').value = 1
            h++
            document.getElementById('totalRate').value = h * a

        }
        else {
            document.getElementById('tabMorning').value = 0
            h--
            document.getElementById('totalRate').value = h * a

        }
    }

    function medTimes2() {
        if (document.getElementById('tabNoon').value == 0) {
            document.getElementById('tabNoon').value = 1
            h++
            document.getElementById('totalRate').value = h * a

        }
        else {
            document.getElementById('tabNoon').value = 0
            h--
            document.getElementById('totalRate').value = h * a
        }
    }

    function medTimes3() {
        if (document.getElementById('tabNight').value == 0) {
            document.getElementById('tabNight').value = 1
            h++
            document.getElementById('totalRate').value = h * a
        }
        else {
            document.getElementById('tabNight').value = 0
            h--
            document.getElementById('totalRate').value = h * a
        }
    }



    function selectPill() {
        var x = document.getElementById("selectPills").selectedIndex;
        document.getElementById("pillQty").value = document.getElementById("myPillQty")[x].value;
        document.getElementById("myPillRate").value = document.getElementById("pillRate")[x].value
        b = document.getElementById("myPillRate").value / document.getElementById("pillQty").value
        document.getElementById("ratePerPill").value = b

    }

    function pillTotal() {
        var x = document.getElementById("pillsDays").value;
        const pillTotals = document.getElementById("totalPillRate").value * x
        document.getElementById("subPillTotal").value = pillTotals
    }

    function medPills1() {
        if (document.getElementById('pillMorning').value == 0) {
            document.getElementById('pillMorning').value = 1
            h++
            document.getElementById('totalPillRate').value = h * b

        }
        else {
            document.getElementById('pillMorning').value = 0
            h--
            document.getElementById('totalPillRate').value = h * b

        }
    }

    function medPills2() {
        if (document.getElementById('pillNoon').value == 0) {
            document.getElementById('pillNoon').value = 1
            h++
            document.getElementById('totalPillRate').value = h * b

        }
        else {
            document.getElementById('pillNoon').value = 0
            h--
            document.getElementById('totalPillRate').value = h * b
        }
    }

    function medPills3() {
        if (document.getElementById('pillNight').value == 0) {
            document.getElementById('pillNight').value = 1
            h++
            document.getElementById('totalPillRate').value = h * b
        }
        else {
            document.getElementById('tabNight').value = 0
            h--
            document.getElementById('totalPillRate').value = h * b
        }
    }

    function selectSyrups() {
        var x = document.getElementById("selectSyrup").selectedIndex;
        document.getElementById("syrupsQty").value = document.getElementById("mySyrupsQty")[x].value;
        document.getElementById("mySyrupsRate").value = document.getElementById("syrupsRate")[x].value
        b = document.getElementById("mySyrupsRate").value / document.getElementById("syrupsQty").value
        document.getElementById("ratePerSyrups").value = b

    }
    function syrupsTotal() {
        var x = document.getElementById("syrupDays").value;
        const syrupsTotals = document.getElementById("totalSyrupsRate").value * x
        document.getElementById("subSyrupsTotal").value = syrupsTotals
    }

    function funInjectionRate() {
        var x = document.getElementById('myInjection').selectedIndex
        document.getElementById('injectionsRateVal').value = document.getElementById('injectionRate')[x].value / document.getElementById('myInjectionQty')[x].value
    }

    function funOinmentsRate() {
        var x = document.getElementById('myOintments').selectedIndex
        document.getElementById('ointmentsRateVal').value = document.getElementById('ointmentsRate')[x].value / document.getElementById('myOintmentsQty')[x].value
    }

    function balmsTotal() {
        var x = document.getElementById('mybalms').selectedIndex
        document.getElementById('balmsRateVal').value = document.getElementById('balmsRate')[x].value / document.getElementById('myBalmsQty')[x].value
    }

    function packetsTotal() {
        var x = document.getElementById('mypackets').selectedIndex
        document.getElementById('packetsRateVal').value = document.getElementById('packetRate')[x].value / document.getElementById('myPacketQty')[x].value
    }

    function packetsOthers() {
        var x = document.getElementById('myothers').selectedIndex
        document.getElementById('othersRateVal').value = document.getElementById('othersRate')[x].value / document.getElementById('myOthersQty')[x].value
    }

</script>